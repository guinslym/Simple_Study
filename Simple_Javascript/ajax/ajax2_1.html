<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
	<title></title>
    <style type="text/css">
    progress {width: 600px;height: 40px;}
    </style>
</head>
<body>
<form>
    <input type="file" name="upload" action="upload.php" method="post"><br>
    <input type="submit" value="上传" id="btn">
</form>
<progress min="0" max="100" value="0">0</progress>
</body>
<script type="text/javascript">
	window.onload=function(){
        var xhr;
        var oForm=document.forms[0];
        var oBtn=document.getElementById("btn");
        oForm.onchange=function upload(){
            if(window.XMLHttpRequest){
                xhr = new XMLHttpRequest();
        }else {
            xhr = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xhr.open("POST","http://localhost/ajax/upload.php",true);
        var progress=document.getElementsByTagName('progress')[0];
        xhr.upload.onprogress=function(e){
            if (e.lengthComputable) {
                progress.value=((e.loaded/e.total)*100)
            }
        }
        xhr.send(upload);
        }
    };
</script>
</html>